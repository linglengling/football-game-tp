!function(e,t,s,i,o){var r={model:{},collection:{},view:{},fn:{}};r.view.inspector=Backbone.View.extend({active:!1,hl:!1,hoverEl:!1,selectorTemplate:t.template('<div class="socss-selector"><%= selector %></div>'),initialize:function(){var t=this;this.hl=new r.view.highlighter,this.hl.initialize(),e("body").append('<div class="p-3 anwp-bg-light fl-so-css-mode-switcher anwp-text-center socss-link">FL Mode - <span>Active</span><br><a href="'+o.admin_url+'" target="_blank">change</a></div>'),e("body").on("mouseover","*",(function(s){if(!t.active)return!0;0===e(this).closest(".socss-element").length&&(s.stopPropagation(),t.setHoverEl(e(this)))}));var s=e(".single-product").length;e("body *").on("click",(function(i){if(!t.active||e(i.target).parent(".socss-link").length)return!0;var o=e(this);s&&o.parents(".wc-tabs").length||(i.preventDefault(),o.trigger("blur"),t.setActiveEl(t.hoverEl,i))})),this.$(".socss-enable-inspector").on("click",(function(){t.toggleActive()})),this.$el.on("mouseenter",(function(){t.hl.clear()}));try{parent.socss.mainEditor.setInspector(this)}catch(e){console.log("No editor to register this inspector with")}},setHoverEl:function(e){this.hoverEl=e,this.hl.highlight(e)},activate:function(){this.active=!0,e("body").addClass("socss-active"),e("body").removeClass("socss-inactive")},deactivate:function(){this.active=!1,e("body").addClass("socss-inactive"),e("body").removeClass("socss-active"),this.hl.clear(),this.$(".socss-hierarchy").empty()},toggleActive:function(){this.active?this.deactivate():this.activate()},setActiveEl:function(s,o){var a=this,c=this.$(".socss-hierarchy");if(c.empty(),s){var n=s.closest("a[href]"),l=this.$(".socss-link");if(n.length?l.show().find("a").html(n.attr("href").replace(/[\?&]*so_css_preview=1/,"")).attr("href",n.attr("href")):l.hide(),"body"!==s.prop("tagName").toLowerCase()){var h=e(s);do{Array.from(h[0].classList).filter(e=>i.includes(e)).length&&e(this.selectorTemplate({selector:Array.from(h[0].classList).find(e=>i.includes(e))})).prependTo(c).data("el",h),h=h.parent()}while("body"!==h.prop("tagName").toLowerCase());this.$(".socss-hierarchy .socss-selector").on("mouseenter",(function(){a.hl.highlight(e(this).data("el"))})).on("click",(function(t){t.preventDefault(),t.stopPropagation(),a.setActiveEl(e(this).data("el"),t)}))}void 0!==o&&o.stopPropagation();var p=this.$(".socss-selectors-window").empty(),d=Array.from(s[0].classList).filter(e=>i.includes(e));if(d.length){d.forEach(t=>{p.append(e(a.selectorTemplate({selector:"."+t})).data("selector","."+t))}),p.children("div").on("mouseenter",(function(){a.hl.highlight(e(this).data("selector"))})).on("click",(function(t){t.preventDefault(),t.stopPropagation(),a.trigger("click_selector",e(this).data("selector"))}));var f=r.fn.elementAttributes(s);p=this.$(".socss-properties-window").empty(),t.each(f,(function(t,s){p.append(e(a.selectorTemplate({selector:"<strong>"+s+"</strong>: "+t})).data("property",s+": "+t))})),p.find("> div").on("click",(function(t){t.preventDefault(),t.stopPropagation(),a.trigger("click_property",e(this).data("property"))})),this.trigger("set_active_element",s,[])}}}}),r.view.highlighter=Backbone.View.extend({template:t.template(e("#socss-template-hover").html().trim()),highlighted:[],highlight:function(t){this.clear();var s=this;e(t).each((function(t,o){if(o=e(o),!Array.from(o[0].classList).filter(e=>i.includes(e)).length)return!0;if(!o.is(":visible"))return!0;var r,a=e(s.template());a.css({top:o.offset().top,left:o.offset().left,width:o.outerWidth(),height:o.outerHeight()}).appendTo("body");var c=o.padding();for(var n in c)parseInt(c[n])>0&&(r=a.find(".socss-guide-padding.socss-guide-"+n).show(),"top"===n||"bottom"===n?r.css("height",c[n]):(r.css("width",c[n]),r.css({width:c[n],top:c.top,bottom:c.bottom})));var l=o.margin();for(var n in l)parseInt(l[n])>0&&(r=a.find(".socss-guide-margin.socss-guide-"+n).show(),"top"===n||"bottom"===n?r.css("height",l[n]):r.css("width",l[n]));s.highlighted.push(a)}))},clear:function(){for(;this.highlighted.length;)this.highlighted.pop().remove()}}),r.parsedCss={},r.fn.getParsedCss=function(){if(0===Object.keys(r.parsedCss).length){var t=window.css;e(".socss-theme-styles").each((function(){var s=e(this),i=t.parse(s.html(),{silent:!0});r.parsedCss[s.attr("id")]=i}))}return r.parsedCss},r.fn.elementAttributes=function(e){if(!document.styleSheets)return[];var t=[],s=r.fn.getParsedCss(),i=function(e){switch(e){case"charset":case"custom-media":case"document":case"font-face":case"host":case"import":case"keyframes":case"keyframe":case"media":case"namespace":case"page":case"supports":return!0}return!1};for(var o in s)for(var a=s[o].stylesheet.rules,c=0;c<a.length;c++){var n=a[c];if(void 0!==n.selectors&&!i(n.type))for(var l=0;l<n.selectors.length;l++)for(var h=SPECIFICITY.calculate(n.selectors[l]),p=0;p<h.length;p++)try{if(e.is(h[p].selector)){var d=n.declarations;for(p=0;p<d.length;p++)t.push({name:d[p].property,value:d[p].value,specificity:parseInt(h[p].specificity.replace(/,/g,""))})}}catch(e){}}t.sort((function(e,t){return e.specificity>t.specificity?1:-1})).reverse();for(var f={},v=0;v<t.length;v++)void 0===f[t[v].name]&&(f[t[v].name]=t[v].value);return f},r.fn.elSelector=function(e){var t="";return void 0!==e.attr("id")&&(t+="#"+e.attr("id")),void 0!==e.attr("class")&&(t+="."+e.attr("class").replace(/\s+/g,".")),""===t&&(t=e.prop("tagName").toLowerCase()),t},window.socssInspector=r}(jQuery,_,socssOptions,_AnWP_CSS_Classes,_AnWP_SOCSS_Mode),jQuery((function(e){var t=new window.socssInspector.view.inspector({el:e("#socss-inspector-interface").get(0)});t.activate(),window.socssInspector.mainInspector=t}));